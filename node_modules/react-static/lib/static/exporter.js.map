{"version":3,"sources":["../../src/static/exporter.js"],"names":["require","setIgnorePath","config","routes","siteData","clientStats","incremental","htmlProgress","length","paths","DIST","Comp","glob","sync","path","resolve","ASSETS","default","DocumentTemplate","Document","DefaultDocument","tasks","i","route","push","tick","Number","outputFileRate"],"mappings":";;;;;;;;;AAIA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;;;;;;;AATA;eAE0BA,OAAO,CAAC,oBAAD,C;IAAzBC,a,YAAAA,a;;;;;;;4BASO;AAAA;;AAAA;AAAA;AAAA;AAAA;AACbC,YAAAA,MADa,QACbA,MADa,EAEbC,MAFa,QAEbA,MAFa,EAGbC,QAHa,QAGbA,QAHa,EAIbC,WAJa,QAIbA,WAJa,EAKbC,WALa,QAKbA,WALa;AAOPC,YAAAA,YAPO,GAOQ,qBAASJ,MAAM,CAACK,MAAhB,CAPR,EAQb;;AAEAP,YAAAA,aAAa,CAACC,MAAM,CAACO,KAAP,CAAaC,IAAd,CAAb;AAEMC,YAAAA,IAZO,GAYAX,OAAO,CAACY,cAAKC,IAAL,CACnBC,cAAKC,OAAL,CAAab,MAAM,CAACO,KAAP,CAAaO,MAA1B,EAAkC,aAAlC,CADmB,EAEnB,CAFmB,CAAD,CAAP,CAEPC,OAdO,EAeb;;AACMC,YAAAA,gBAhBO,GAgBYhB,MAAM,CAACiB,QAAP,IAAmBC,+BAhB/B;AAkBPC,YAAAA,KAlBO,GAkBC,EAlBD;;AAAA,mCAmBJC,CAnBI;AAoBX,kBAAMC,KAAK,GAAGpB,MAAM,CAACmB,CAAD,CAApB,CApBW,CAqBX;;AACAD,cAAAA,KAAK,CAACG,IAAN;AAAA;AAAA;AAAA;AAAA,wCAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BACH,0BAAY;AAChBtB,0BAAAA,MAAM,EAANA,MADgB;AAEhBS,0BAAAA,IAAI,EAAJA,IAFgB;AAGhBO,0BAAAA,gBAAgB,EAAhBA,gBAHgB;AAIhBK,0BAAAA,KAAK,EAALA,KAJgB;AAKhBnB,0BAAAA,QAAQ,EAARA,QALgB;AAMhBC,0BAAAA,WAAW,EAAXA,WANgB;AAOhBC,0BAAAA,WAAW,EAAXA;AAPgB,yBAAZ,CADG;;AAAA;AAUTC,wBAAAA,YAAY,CAACkB,IAAb;;AAVS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAX;AAtBW;;AAmBb,iBAASH,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAGnB,MAAM,CAACK,MAA3B,EAAmCc,CAAC,EAApC,EAAwC;AAAA,oBAA/BA,CAA+B;AAevC;;AAlCY;AAAA,mBAmCP,oBAAQD,KAAR,EAAeK,MAAM,CAACxB,MAAM,CAACyB,cAAR,CAArB,CAnCO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/* eslint-disable import/first, import/no-dynamic-require */\n\nconst { setIgnorePath } = require('../utils/binHelper')\n\nimport glob from 'glob'\nimport path from 'path'\n\nimport { DefaultDocument } from './RootComponents'\nimport { poolAll, progress } from '../utils'\nimport exportRoute from './exportRoute'\n\nexport default async ({\n  config,\n  routes,\n  siteData,\n  clientStats,\n  incremental,\n}) => {\n  const htmlProgress = progress(routes.length)\n  // Use the node version of the app created with webpack\n\n  setIgnorePath(config.paths.DIST)\n\n  const Comp = require(glob.sync(\n    path.resolve(config.paths.ASSETS, 'static.*.js')\n  )[0]).default\n  // Retrieve the document template\n  const DocumentTemplate = config.Document || DefaultDocument\n\n  const tasks = []\n  for (let i = 0; i < routes.length; i++) {\n    const route = routes[i]\n    // eslint-disable-next-line\n    tasks.push(async () => {\n      await exportRoute({\n        config,\n        Comp,\n        DocumentTemplate,\n        route,\n        siteData,\n        clientStats,\n        incremental,\n      })\n      htmlProgress.tick()\n    })\n  }\n  await poolAll(tasks, Number(config.outputFileRate))\n}\n"],"file":"exporter.js"}